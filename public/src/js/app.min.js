let deferredPrompt,enableNotifButtons=document.querySelectorAll(".enable-notifications");function displayConfirmNotification(){if("serviceWorker"in navigator){const i={body:"You have subscribed to PDPgram!",icon:"/src/images/icons/app-icon-96x96.png",image:"/src/images/sf-boat.jpg",dir:"ltr",lang:"en-US",vibrate:[100,50,200],badge:"/src/images/icons/app-icon-96x96.png",tag:"confirmation-notification",renotify:!0,actions:[{action:"confirm",title:"Okay",icon:"/src/images/icons/app-icon-96x96.png"},{action:"cancel",title:"Cancel",icon:"/src/images/icons/app-icon-96x96.png"}]};navigator.serviceWorker.ready.then((function(n){n.showNotification("Successfully subscribed!",i)}))}}function setupPushSubscription(){const i=urlBase64ToUint8Array("BKVTd2I14_4ucLgG20XcvnT2JxhUbs2CJuMQFEyaD3DJLbnNrdpthAtJtaQr1X2h9KzIRRpUDCCeGczlTxtRHC8");let n;navigator.serviceWorker.ready.then((function(i){return n=i,i.pushManager.getSubscription()})).then((function(o){if(!o)return n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:i})})).then((function(i){return fetch("https://pdpgram.firebaseio.com/subscriptions.json",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(i)})})).then((function(i){i.ok&&displayConfirmNotification()})).catch((function(i){console.log(i)}))}function askForNotifPermission(){Notification.requestPermission((function(i){console.log("User choice",i),"granted"!==i?console.log("No notification permission granted"):setupPushSubscription()}))}if(window.Promise||(window.Promise=Promise),"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").then((function(){console.log("Service worker registered!")})).catch((function(i){console.log(i)})),window.addEventListener("beforeinstallprompt",(function(i){return console.log("Event: beforeinstallprompt",i),i.preventDefault(),deferredPrompt=i,!1})),"Notification"in window&&"serviceWorker"in navigator)for(let i of enableNotifButtons)i.style.display="inline-block",i.addEventListener("click",askForNotifPermission);