window.setImmediate||function(){"use strict";var n=0,e={},t=!0,r=Array.prototype.slice,i="setImmediatePolyfillMessage";function o(n){var t,o=n.data;"string"==typeof o&&0==o.indexOf(i)&&(t=e[o])&&(delete e[o],function(n){var e=n[0];switch(n.length){case 1:return e();case 2:return e(n[1]);case 3:return e(n[1],n[2])}e.apply(window,r.call(n,1))}(t))}window.setImmediate=function(){for(var r=n++,u=i+r,c=arguments.length,f=new Array(c);c--;)f[c]=arguments[c];return e[u]=f,t&&(t=!1,window.addEventListener("message",o)),window.postMessage(u,"*"),r},window.clearImmediate=function(n){delete e[i+n]}}(),function(n){"use strict";var e="[[PromiseStatus]]",t="[[PromiseValue]]",r="[[OnFulfilled]]",i="[[OnRejected]]",o="[[OriginalError]]",u="pending",c="fulfilled",f="rejected",a="not an array.",s=n.setImmediate||require("timers").setImmediate,l=Array.isArray||function(n){return"[object Array]"==Object.prototype.toString.call(n)};function d(n){this[o]=n}function h(n){return n instanceof d}function w(n){return"function"==typeof n}function m(n){return n instanceof b}function p(n){return n}function y(n){throw n}function v(n){delete n[r],delete n[i]}function g(n){var e,t=n.length;for(e=0;e<t;e++)n[e]()}function P(n,e,t){var r=j(t);m(r)?r.then(n,e):h(r)?e(r[o]):n(t)}function j(n){var e;if(m(n))return n;if(function(n){return Object(n)===n}(n)){try{e=n.then}catch(n){return new d(n)}if(w(e))return new b((function(t,r){s((function(){try{e.call(n,t,r)}catch(n){r(n)}}))}))}return null}function E(n,t){function r(t){n[e]==u&&O(n,t)}try{t((function(t){n[e]==u&&I(n,t)}),r)}catch(n){r(n)}}function I(n,i){var u,f=j(i);m(f)?(n[e]="internal pending",f.then((function(e){I(n,e)}),(function(e){O(n,e)}))):h(f)?O(n,f[o]):(n[e]=c,n[t]=i,(u=n[r])&&u.length&&(v(n),g(u)))}function O(n,r){var o=n[i];n[e]=f,n[t]=r,o&&o.length&&(v(n),g(o))}function b(n){var r=this;if(!m(r))throw new TypeError('constructor Promise requires "new".');r[e]=u,r[t]=void 0,E(r,n)}b.prototype.then=function(n,o){var u,a=this;return n=w(n)?n:p,o=w(o)?o:y,u=new b((function(l,d){function h(n){var e;try{e=n(a[t])}catch(n){return void d(n)}e===u?d(new TypeError("then() cannot return same Promise that it resolves.")):P(l,d,e)}function w(){s(h,n)}function m(){s(h,o)}switch(a[e]){case c:w();break;case f:m();break;default:!function(n,e,t){n[r]||(n[r]=[],n[i]=[]),n[r].push(e),n[i].push(t)}(a,w,m)}}))},b.prototype.catch=function(n){return this.then(p,n)},b.resolve=function(n){var e=j(n);return m(e)?e:new b((function(t,r){h(e)?r(e[o]):t(n)}))},b.reject=function(n){return new b((function(e,t){t(n)}))},b.race=function(n){return new b((function(e,t){var r,i;if(l(n))for(i=n.length,r=0;r<i;r++)P(e,t,n[r]);else t(new TypeError(a))}))},b.all=function(n){return new b((function(e,t){var r,i,u,c,f=0,s=0;if(l(n)){for(i=(n=n.slice(0)).length,c=0;c<i;c++)m(r=j(u=n[c]))?(s++,r.then(function(t){return function(r){n[t]=r,++f==s&&e(n)}}(c),t)):h(r)?t(r[o]):n[c]=u;s||e(n)}else t(new TypeError(a))}))},"undefined"!=typeof module&&module.exports?module.exports=n.Promise||b:n.Promise||(n.Promise=b)}(this);